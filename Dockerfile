# Generated by https://smithery.ai. See: https://smithery.ai/docs/config#dockerfile
FROM python:3.10-slim

# Set working directory
WORKDIR /app

# Copy the project files
COPY pyproject.toml ./
COPY src ./src
COPY README.md ./

# Create a default .env file with a dummy API key to satisfy startup requirement.
# In production, the NOTION_API_KEY env var will override this if mounted.
RUN echo "NOTION_API_KEY=changeme" > .env

# Upgrade pip and install the package in editable mode
RUN pip install --upgrade pip \
    && pip install -e . --no-cache-dir

# Set environment variable placeholder for Notion API Key (can be overridden at runtime)
ENV NOTION_API_KEY="changeme"

# Command to run the MCP server
CMD ["python", "-m", "notion_mcp"]
